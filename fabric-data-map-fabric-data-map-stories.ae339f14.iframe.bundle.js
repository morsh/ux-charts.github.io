"use strict";(self.webpackChunkpowerbi_clients=self.webpackChunkpowerbi_clients||[]).push([[522],{"./trident/libs/ux-charts/src/lib/fabric-data-map/fabric-data-map.stories.ts":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineChartOptions=void 0;const common_1=__webpack_require__("./node_modules/.pnpm/@angular+common@16.2.12_@angular+core@16.2.12_rxjs@6.6.7/node_modules/@angular/common/fesm2022/common.mjs"),angular_1=__webpack_require__("./node_modules/.pnpm/@storybook+angular@7.5.3_@angular-devkit+architect@0.1602.13_@angular-devkit+build-angular@16_evdpuco6fj25d2slin6wxkzyfy/node_modules/@storybook/angular/dist/index.mjs"),injec_load_script_1=__webpack_require__("./trident/libs/ux-charts/src/lib/injec-load-script.ts"),nodes_data_1=__webpack_require__("./trident/libs/ux-charts/src/lib/fabric-data-map/nodes-data.ts");(0,__webpack_require__("./trident/libs/ux-charts/src/lib/fabric-data-map/fabric-data-map.ts").registerFabricDataMap)();const LoadComponent=(0,injec_load_script_1.injectLoadScript)((()=>{setTimeout((()=>{const fabricDataMap=document.querySelector("fabric-data-map");fabricDataMap.data=nodes_data_1.NodesData,fabricDataMap.redraw()}),100)}));exports.default={title:"Components/fabric-data-map",decorators:[(0,angular_1.moduleMetadata)({imports:[common_1.CommonModule,LoadComponent]})]};exports.lineChartOptions=()=>({template:'\n    <div style="height: 250px; width: 500px;">\n      <fabric-data-map />\n    </div>\n    <load-script />\n    '})},"./trident/libs/ux-charts/src/lib/colors.ts":(__unused_webpack_module,exports)=>{var Colors;Object.defineProperty(exports,"__esModule",{value:!0}),exports.BarsDataRange=exports.Colors=void 0,function(Colors){Colors.PrimaryFluentDataVizSlot1="#637CEF",Colors.PrimaryFluentDataVizSlot2="#E3008C",Colors.PrimaryFluentDataVizSlot3="#2AA0A4",Colors.PrimaryFluentDataVizSlot4="#9373C0",Colors.PrimaryFluentDataVizSlot5="#3B52B4",Colors.PrimaryFluentDataVizSlot6="#B146C2",Colors.PrimaryFluentDataVizSlot7="#13A10E",Colors.PrimaryFluentDataVizSlot8="#14A3B3",Colors.PrimaryFluentDataVizSlot9="#689920",Colors.PrimaryFluentDataVizSlot10="#B27C00",Colors.PrimaryFluentDataVizNeutral1="#E0E0E0",Colors.PrimaryFluentDataVizNeutral2="#EBEBEB",Colors.NeutralWebGrey160="#323130",Colors.NeutralBackground1Pressed="#E0E0E0"}(Colors||(exports.Colors=Colors={})),exports.BarsDataRange=[Colors.PrimaryFluentDataVizSlot1,Colors.PrimaryFluentDataVizSlot2,Colors.PrimaryFluentDataVizSlot3,Colors.PrimaryFluentDataVizSlot4,Colors.PrimaryFluentDataVizSlot5,Colors.PrimaryFluentDataVizSlot6,Colors.PrimaryFluentDataVizSlot7,Colors.PrimaryFluentDataVizSlot8,Colors.PrimaryFluentDataVizSlot9,Colors.PrimaryFluentDataVizSlot10]},"./trident/libs/ux-charts/src/lib/fabric-data-map/fabric-data-map.ts":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerFabricDataMap=exports.FabricDataMap=void 0;const colors_1=__webpack_require__("./trident/libs/ux-charts/src/lib/colors.ts"),margins_1=__webpack_require__("./trident/libs/ux-charts/src/lib/positioning/margins.ts");class FabricDataMap extends HTMLElement{constructor(){super(...arguments),this.margin=margins_1.Margins.DataMap,this._data={nodes:[],links:[]},this._options={}}get widthMargin(){return this.margin.left+this.margin.right}get heightMargin(){return this.margin.top+this.margin.bottom}set data(value){this._data=value,this.redraw()}get data(){return this._data}get options(){return this._options}set options(options){this._options=options,this.redraw()}connectedCallback(){const style=document.createElement("style");style.textContent="\n            .fabric-data-map rect {\n                cursor: pointer;\n            }\n            .fabric-data-map .active {\n                fill: orange;\n                stroke: orange;\n            }\n            .fabric-data-map .activelink {\n                fill: none;\n                stroke: orange;\n                stroke-width: 2.5px;\n            }\n            .fabric-data-map .label {\n                pointer-events: none;\n\n                fill: #424242;\n                font-family: Segoe UI;\n                font-size: 8px;\n                font-weight: 400;\n            }\n\n            .fabric-data-map .label_value {\n                pointer-events: none;\n\n                fill: #424242;\n                font-family: Segoe UI;\n                font-size: 20px;\n                font-weight: 600;\n            }\n            .fabric-data-map .link {\n                fill: none;\n                stroke: #242424;\n                stroke-width: 0.5px;\n            }\n        ",this.wrapper=document.createElement("figure"),this.wrapper.setAttribute("class","fabric-data-map"),this.appendChild(style),this.appendChild(this.wrapper),window.addEventListener("resize",(()=>this.redraw())),this.redraw()}redraw(){this.width=this.parentElement.clientWidth-this.widthMargin,this.height=this.parentElement.clientHeight-this.heightMargin,this.wrapper.innerHTML="",this.createSvg(this.wrapper),this.renderRelationshipGraph(this.data)}createSvg(wrapper){this.svg=d3.select(wrapper).append("svg").attr("width",this.width+this.widthMargin).attr("height",this.height+this.heightMargin).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")")}renderRelationshipGraph(data){let count=[],gap_width=20,gap_height=20;this.data.nodes.forEach((function(d){count[d.lvl]=0}));Object.keys(count).length;const nodes=[],links=[];function mouse_action(val,stat,direction){d3.select("#"+val.id).classed("active",stat),links.forEach((d=>{"root"===direction?(d.source.id===val.id&&(d3.select("#"+d.id).classed("activelink",stat),d3.select("#"+d.id).classed("link",!stat),d.target.lvl<val.lvl?mouse_action(d.target,stat,"left"):d.target.lvl>val.lvl&&mouse_action(d.target,stat,"right")),d.target.id===val.id&&(d3.select("#"+d.id).classed("activelink",stat),d3.select("#"+d.id).classed("link",!stat),"root"===direction&&(d.source.lvl<val.lvl?mouse_action(d.source,stat,"left"):d.source.lvl>val.lvl&&mouse_action(d.source,stat,"right")))):"left"===direction?(d.source.id===val.id&&d.target.lvl<val.lvl&&(d3.select("#"+d.id).classed("activelink",stat),d3.select("#"+d.id).classed("link",!stat),mouse_action(d.target,stat,direction)),d.target.id===val.id&&d.source.lvl<val.lvl&&(d3.select("#"+d.id).classed("activelink",stat),d3.select("#"+d.id).classed("link",!stat),mouse_action(d.source,stat,direction))):"right"===direction&&(d.source.id===val.id&&d.target.lvl>val.lvl&&(d3.select("#"+d.id).classed("activelink",stat),d3.select("#"+d.id).classed("link",!stat),mouse_action(d.target,stat,direction)),d.target.id===val.id&&d.source.lvl>val.lvl&&(d3.select("#"+d.id).classed("activelink",stat),d3.select("#"+d.id).classed("link",!stat),mouse_action(d.source,stat,direction)))}))}function unvisite_links(){links.forEach((function(d){d.visited=!1}))}data.nodes.forEach(((d,i)=>{d.x=this.margin.left+d.lvl*(61+gap_width),d.y=this.margin.top+30+(12+gap_height+30)*count[d.lvl],count[d.lvl]+=1,nodes.push(d)})),data.links.forEach((function(d){const source=nodes.find((n=>n.id===d.source)),target=nodes.find((n=>n.id===d.target));links.push({source,target,id:"l"+(null==source?void 0:source.id)+(null==target?void 0:target.id)})})),unvisite_links(),this.svg.append("g").attr("class","nodes");let node=this.svg.select(".nodes").selectAll("g").data(nodes).enter().append("g").attr("class","unit");const color=d3.scaleOrdinal(colors_1.BarsDataRange);node.append("rect").attr("x",(d=>d.x)).attr("y",(d=>d.y)).attr("id",(d=>d.id)).attr("width",61).attr("height",12).attr("class","node").attr("fill",(d=>"number"==typeof d.type?color(d.type+""):colors_1.Colors.NeutralBackground1Pressed)).on("mouseover",(function(){mouse_action(d3.select(this).datum(),!0,"root"),unvisite_links()})).on("mouseout",(function(){mouse_action(d3.select(this).datum(),!1,"root"),unvisite_links()})),node.append("text").attr("class","label").attr("x",(d=>d.x)).attr("y",(d=>d.y+25)).text((d=>d.name)),node.append("text").attr("class","label_value").attr("x",(d=>d.x)).attr("y",(d=>d.y-7)).text((d=>d.value||"")),links.forEach((link=>{this.svg.append("path").attr("class","link").attr("id",link.id).attr("d",(()=>{let oTarget={x:link.target.y+6,y:link.target.x},oSource={x:link.source.y+6,y:link.source.x};return oSource.y<oTarget.y?oSource.y+=61:oTarget.y+=61,"M"+(d={source:oSource,target:oTarget}).source.y+","+d.source.x+"C"+(d.source.y+d.target.y)/2+","+d.source.x+" "+(d.source.y+d.target.y)/2+","+d.target.x+" "+d.target.y+","+d.target.x;var d}))}))}}exports.FabricDataMap=FabricDataMap,exports.registerFabricDataMap=function registerFabricDataMap(){void 0===customElements.get("fabric-data-map")&&customElements.define("fabric-data-map",FabricDataMap)}},"./trident/libs/ux-charts/src/lib/fabric-data-map/nodes-data.ts":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodesData=void 0,exports.NodesData={nodes:[{lvl:0,id:1,name:"Items",value:"130",type:0},{lvl:1,id:2,name:"Finance",type:1},{lvl:1,id:3,name:"Marketing",type:1},{lvl:1,id:4,name:"No Domain"},{lvl:2,id:5,name:"No Sub Domain"},{lvl:2,id:6,name:"Marketing EU",type:3},{lvl:2,id:7,name:"Marketing US",type:3},{lvl:3,id:8,name:"Conferences",type:4},{lvl:3,id:9,name:"Customers",type:4},{lvl:4,id:10,name:"Reports",value:"3",type:5},{lvl:4,id:11,name:"Semantic Models",value:"5",type:5},{lvl:4,id:12,name:"Lakehouses",value:"1",type:5}],links:[{source:1,target:2},{source:1,target:3},{source:1,target:4},{source:3,target:6},{source:3,target:7},{source:6,target:8},{source:6,target:9},{source:9,target:10},{source:9,target:11},{source:9,target:12}]}},"./trident/libs/ux-charts/src/lib/injec-load-script.ts":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.injectLoadScript=void 0;const tslib_1=__webpack_require__("./node_modules/.pnpm/tslib@2.3.0/node_modules/tslib/tslib.es6.js"),common_1=__webpack_require__("./node_modules/.pnpm/@angular+common@16.2.12_@angular+core@16.2.12_rxjs@6.6.7/node_modules/@angular/common/fesm2022/common.mjs"),core_1=__webpack_require__("./node_modules/.pnpm/@angular+core@16.2.12_rxjs@6.6.7_zone.js@0.13.0/node_modules/@angular/core/fesm2022/core.mjs");exports.injectLoadScript=cb=>{let HeroListComponent=class HeroListComponent{constructor(){}ngOnInit(){cb()}};return HeroListComponent.ctorParameters=()=>[],HeroListComponent=tslib_1.__decorate([(0,core_1.Component)({standalone:!0,selector:"load-script",template:"",imports:[common_1.CommonModule]}),tslib_1.__metadata("design:paramtypes",[])],HeroListComponent),HeroListComponent}},"./trident/libs/ux-charts/src/lib/positioning/margins.ts":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Margins=void 0,exports.Margins={BarChart:{top:10,right:0,bottom:20,left:30},PieChart:{top:10,right:0,bottom:20,left:30},LineChart:{top:10,right:0,bottom:20,left:30},ScoreCard:{top:10,right:0,bottom:10,left:0},DataMap:{top:16,right:16,bottom:16,left:16}}}}]);